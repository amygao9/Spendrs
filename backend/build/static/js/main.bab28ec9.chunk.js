(this["webpackJsonpfrontend-web"]=this["webpackJsonpfrontend-web"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},175:function(e,t,n){},207:function(e,t,n){},209:function(e,t,n){},245:function(e,t,n){},279:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=279},29:function(e,t,n){},296:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var r=n(22),a=n(1),s=n(28),c=n.n(s),i=n(57),o=n(179),u=n(180),l=n(12),d=n(33),j=n(182),b=(n(207),n(5)),p=n.n(b),h=n(10),f=n(27),O=new(n(37).a),m=n(7),x=(n(209),n.p+"static/media/blob.87f92d6f.svg"),v=n.p+"static/media/3characters.1b2f2a1f.svg",g=n(311),w=n(85),y=n.n(w),N=n(40),k=n.n(N),C="http://localhost:3000",S=y.a.create();S.interceptors.request.use((function(e){var t=k.a.get("jwt");return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){Promise.reject(e)})),S.interceptors.response.use((function(e){return e}),(function(e){throw e.response&&401===e.response.status?(k.a.remove("jwt"),new Error("auth invalid")):e}));var P=S,D=n(134),B=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={maxSizeMB:.05,maxWidthOrHeight:400,useWebWorker:!0,fileType:"image/jpeg"},e.prev=1,e.next=4,Object(D.a)(t,n);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={maxSizeMB:1,maxWidthOrHeight:1e3,useWebWorker:!0,fileType:"image/jpeg"},e.prev=1,e.next=4,Object(D.a)(t,n);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),T={};var I=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(C+"/api/users");case 3:return r=e.sent,t({type:"userData/userStatus",payload:r.data}),e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("err :>> ",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get(C+"/api/users/profile/".concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:return t.prev=7,t.t0=t.catch(0),console.log("err :>> ",t.t0),t.abrupt("return",{err:t.t0.response.data.err});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get(C+"/api/users/following/".concat(e));case 3:return a=t.sent,t.abrupt("return",a.data.following);case 7:return t.prev=7,t.t0=t.catch(0),console.log("err :>> ",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.put(C+"/api/users/update",e);case 3:return a=t.sent,console.log("result.data :>> ",a.data),n({type:"userData/userStatus",payload:a.data}),t.abrupt("return",a.data);case 9:return t.prev=9,t.t0=t.catch(0),console.log("err.response.data.err :>> ",t.t0.response.data.err),t.abrupt("return",{err:t.t0.response.data.err});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B(e);case 3:return a=t.sent,(s=new FormData).append("file",a),t.next=8,P.post(C+"/api/users/upload/profile_pic",s);case 8:n(I),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},M=function(e,t,n,r){return function(){var a=Object(h.a)(p.a.mark((function a(s,c){var i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,P.patch(C+"/api/users/changePassword",{oldPass:e,password:t,confirmPass:n,passwordStrength:r});case 3:if((i=a.sent)&&"string"!=typeof i.data){a.next=7;break}throw console.log(i),Error("Error: User received from API but not correctly formatted");case 7:return a.abrupt("return",i.data);case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",{err:a.t0.response.data.err});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},R=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete(C+"/api/users/deleteUser");case 3:if((r=e.sent)&&200===r.status&&"string"!=typeof r.data){e.next=7;break}throw console.log(r),Error("Error: User received from API but not correctly formatted");case 7:return e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{err:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),_={loggedIn:!1,admin:!1},H=function(e,t){return function(){var n=Object(h.a)(p.a.mark((function n(r,a){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.post(C+"/api/login",{username:e,password:t});case 3:if((s=n.sent)&&200===s.status){n.next=6;break}throw Error("Unable to login");case 6:return k.a.set("jwt",s.data.jwt),s.admin?r({type:"loggedIn/admin"}):r({type:"loggedIn/login"}),r(I),n.abrupt("return",s.data.admin?"admin":"user");case 12:return n.prev=12,n.t0=n.catch(0),console.log("err :>> ",n.t0.response.data.err),n.abrupt("return",{err:n.t0.response.data.err});case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}()},W=function(e,t,n,r,a){return function(){var s=Object(h.a)(p.a.mark((function s(c,i){var o;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,y.a.post(C+"/api/signup",{name:e,email:t,username:n,password:r,passwordStrength:a});case 3:if((o=s.sent)&&200===o.status&&"string"!=typeof o.data){s.next=6;break}throw Error("Could not create new user.");case 6:k.a.set("jwt",o.data.jwt),c({type:"loggedIn/login"}),c(I),s.next=15;break;case 11:return s.prev=11,s.t0=s.catch(0),console.log(s.t0.response.data.err),s.abrupt("return",{err:s.t0.response.data.err});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(e,t){return s.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loggedIn/login":return Object(r.a)(Object(r.a)({},e),{},{loggedIn:!0});case"loggedIn/userType":return Object(r.a)(Object(r.a)({},e),{},{admin:t.payload.admin});default:return e}},z=n(108),Y=n.n(z),$=n(2);var q=function(e){var t=Object(l.c)(),n=Object(f.f)(),r=Object(a.useState)(""),s=Object(m.a)(r,2),c=s[0],i=s[1],o=Object(a.useState)(""),u=Object(m.a)(o,2),d=u[0],j=u[1],b=Object(a.useState)(""),O=Object(m.a)(b,2),x=O[0],v=O[1],w=Object(a.useState)(""),y=Object(m.a)(w,2),N=y[0],k=y[1],C=Object(a.useState)(0),S=Object(m.a)(C,2),P=S[0],D=S[1],B=Object(a.useState)(""),E=Object(m.a)(B,2),T=E[0],I=E[1],F=Object(a.useState)(""),A=Object(m.a)(F,2),L=A[0],U=A[1],M=Object(a.useState)(""),R=Object(m.a)(M,2),_=R[0],H=R[1],G=Object(a.useState)(""),z=Object(m.a)(G,2),q=z[0],Z=z[1],J=Object(a.useState)(""),K=Object(m.a)(J,2),V=K[0],Q=K[1],X=function(){var e=Object(h.a)(p.a.mark((function e(r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),I(""),U(""),H(""),Z(""),Q(""),e.next=4,t(W(c,d,x,N,P));case 4:if(a=e.sent,console.log("result :>> ",a),!a||!a.err){e.next=9;break}return s=a.err,Q(s),s.includes("Name")&&I("redErrorBorder"),s.includes("Email")&&U("redErrorBorder"),s.includes("Username")&&H("redErrorBorder"),s.includes("Password")&&Z("redErrorBorder"),e.abrupt("return");case 9:n.push("/dashboard");case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}();return Object($.jsxs)(g.a,{show:e.show,onHide:e.handleClose,id:"registrationModal",children:[Object($.jsx)(g.a.Header,{closeButton:!0,children:Object($.jsx)(g.a.Title,{children:"Create New Account"})}),Object($.jsxs)(g.a.Body,{children:[Object($.jsx)("p",{className:"redErrorText",children:V}),Object($.jsxs)("form",{onSubmit:function(e){X(e)},children:[Object($.jsx)("input",{className:"inputBox "+T,type:"text",name:"name",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Name"}),Object($.jsx)("input",{className:"inputBox "+L,type:"text",name:"email",value:d,onChange:function(e){return j(e.target.value)},placeholder:"Email"}),Object($.jsx)("input",{className:"inputBox "+_,type:"text",name:"username",value:x,onChange:function(e){return v(e.target.value)},placeholder:"Username"}),Object($.jsx)("input",{className:"inputBox "+q,type:"password",name:"password",value:N,onChange:function(e){return k(e.target.value)},placeholder:"Password"}),Object($.jsx)(Y.a,{password:N,style:{width:"300px",margin:"auto"},onChangeScore:D}),Object($.jsx)("input",{type:"submit",id:"createAccBtn",value:"Create Account"})]})]})]})},Z=n(195);var J=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),i=c[0],o=c[1],u=Object(l.c)(),d=Object(Z.a)(),j=d.register,b=d.handleSubmit;function O(){return(O=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(H(t.username,t.password));case 2:(n=e.sent).err&&o(n.err);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.f)(),Object($.jsxs)("div",{id:"welcomeBackground",children:[Object($.jsx)("div",{id:"leftSide",children:Object($.jsxs)("div",{id:"welcomeText",children:[Object($.jsxs)("h1",{className:"welcomeTitle",children:["Welcome\xa0to",Object($.jsx)("br",{}),"Spendr"]}),Object($.jsxs)("h3",{className:"welcomeSubTitle",children:["Track your spendings ",Object($.jsx)("br",{}),"Share your cops"]})]})}),Object($.jsx)("div",{id:"rightSide",children:Object($.jsxs)("div",{id:"loginCard",children:[Object($.jsxs)("form",{id:"loginForm",onSubmit:b((function(e){return O.apply(this,arguments)})),children:[Object($.jsx)("input",{ref:j,className:"inputBox",type:"text",name:"username",placeholder:"Username"}),Object($.jsx)("input",{ref:j,className:"inputBox",type:"password",name:"password",placeholder:"Password"}),Object($.jsx)("p",{className:"redErrorText",children:i}),Object($.jsx)("input",{className:"inputBox",type:"submit",id:"loginBtn",value:"Log In"})]}),Object($.jsx)("button",{id:"openRegistrationModal",onClick:function(){return r(!0)},children:"Create New Account"}),Object($.jsx)(q,{handleClose:function(){return r(!1)},show:n})]})}),Object($.jsxs)("div",{id:"bottomArt",children:[Object($.jsx)("img",{src:x,id:"blob",alt:"Background blob"}),Object($.jsx)("img",{src:v,id:"threeCharacters",alt:"Three people"})]})]})},K=n(184),V=n(39),Q=(n(150),{results:[]}),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"search/updateResults":return{results:t.results};case"search/clean":return{results:[]};default:return e}};function ee(e){var t;if(""===e.search)t="Start typing to search";else{if(0!==e.results.length)return null;t="No results found"}return Object($.jsx)("p",{className:"searchText",children:t})}function te(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(l.c)(),i=Object(l.d)((function(e){return e.searchData.results})),o=Object(a.useState)(""),u=Object(m.a)(o,2),d=u[0],j=u[1],b=Object(a.useRef)(null);return Object(a.useEffect)((function(){function e(e){b.current&&!b.current.contains(e.target)&&s(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]),Object($.jsxs)("div",{ref:b,children:[Object($.jsx)("label",{className:"searchBar",children:Object($.jsx)("input",{autoComplete:"off",id:"navText",type:"text",placeholder:"Find Users",value:d,onChange:function(e){""!==e.target.value?c(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get(C+"/api/users/findUser/"+e);case 3:a=t.sent,n({type:"search/updateResults",results:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err :>> ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()}(e.target.value)):c((function(){return c({type:"search/clean"})})),j(e.target.value)},onFocus:function(){return s(!0)}})}),r&&Object($.jsxs)("div",{className:"searchResults shadowSmall",children:[Object($.jsx)(ee,{results:i,search:d}),i.map((function(e,t){return Object($.jsx)("a",{className:"searchUser",href:"/profile/"+e,children:e},t)}))]})]})}var ne=n(87);function re(e){var t=e.links,n=Object(a.useState)(!1),r=Object(m.a)(n,2),s=r[0],c=r[1];return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("nav",{className:"main"}),Object($.jsx)("div",{className:"fixed shadowSmall",children:Object($.jsxs)("nav",{className:"main",children:[Object($.jsx)(V.b,{to:"",className:"title",children:Object($.jsx)("h1",{children:"SpendR"})}),!s&&Object($.jsx)(ne.a,{className:"faBars",onClick:function(){c(!s)}}),Object($.jsx)(te,{}),function(){var e=Object.entries(t).map((function(e){return Object($.jsx)(V.b,{to:e[0],className:"linkDefault",activeClassName:"linkActive",children:e[1]},e[0])}));return Object($.jsx)("div",{className:"navBlock",children:e})}(),function(){var e=Object.entries(t).map((function(e){return Object($.jsx)(V.b,{to:e[0],className:"popOutNavlink",activeClassName:"popOutlinkActive",children:e[1]},e[0])}));return Object($.jsx)(K.CSSTransitionGroup,{transitionName:"side",transitionEnterTimeout:300,transitionLeaveTimeout:300,children:s&&Object($.jsxs)("div",{className:"popOutNav",children:[Object($.jsx)(ne.a,{className:"faBars",onClick:function(){c(!s)}}),e]})})}()]})})]})}n(29);var ae=n(314),se=n(312),ce=n(194);function ie(e){var t=e.addPost,n=e.updateData,r=e.name,a=e.link,s=e.price,c=e.desc,i=e.category;return Object($.jsxs)(ae.a,{children:[Object($.jsx)(ae.a.Body,{children:Object($.jsx)(ae.a.Title,{children:"Share your cop"})}),Object($.jsx)(ae.a.Body,{children:Object($.jsxs)(se.a,{id:"shareForm",children:[Object($.jsxs)(se.a.Group,{children:[Object($.jsx)(se.a.Label,{children:"Name"}),Object($.jsx)(se.a.Control,{placeholder:"Enter name",onChange:function(e){return n(e,"name")},value:r,required:!0})]}),Object($.jsxs)(se.a.Group,{children:[Object($.jsx)(se.a.Label,{children:"Link"}),Object($.jsx)(se.a.Control,{placeholder:"Enter link",onChange:function(e){return n(e,"link")},value:a})]}),Object($.jsxs)(se.a.Group,{children:[Object($.jsx)(se.a.Label,{children:"Price"}),Object($.jsx)(se.a.Control,{type:"number",onChange:function(e){return n(e,"price")},value:s,required:!0})]}),Object($.jsxs)(se.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object($.jsx)(se.a.Label,{children:"Caption"}),Object($.jsx)(se.a.Control,{as:"textarea",rows:3,placeholder:"Enter caption here...",onChange:function(e){return n(e,"desc")},value:c})]}),Object($.jsxs)(se.a.Group,{children:[Object($.jsx)(se.a.Label,{children:"Category"}),Object($.jsxs)(se.a.Control,{as:"select",onChange:function(e){return n(e,"category")},value:i,children:[Object($.jsx)("option",{children:"food"}),Object($.jsx)("option",{children:"clothing"}),Object($.jsx)("option",{children:"tech"}),Object($.jsx)("option",{children:"games"}),Object($.jsx)("option",{children:"misc"})]})]}),Object($.jsx)(se.a.Group,{children:Object($.jsx)(se.a.File,{className:"position-relative",name:"file",label:"Attach a Photo",onChange:function(e){return n(e,"file")},accept:"image/*",feedbackTooltip:!0})}),Object($.jsx)(ce.a,{variant:"primary",type:"submit",onClick:function(e){return t(e)},children:"Post!"})]})})]})}var oe=n(306),ue=n(307),le=n(109),de=n.n(le),je=(n(151),n(186)),be=n(23),pe=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("comment ",t,n),e.next=4,P.post(C+"/api/posts/".concat(t,"/comment"),{comment:n});case 4:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.err),e.t0.response.data.err;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),he={feedPosts:[],date:null,finishedLoading:!1};function fe(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post(C+"/api/feed/newsfeed",{num:5});case 3:r=e.sent,t({type:"posts/updateFeed",payload:{feedPosts:r.data.posts}}),t({type:"posts/updateDate",payload:{date:r.data.date}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err :>> ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function me(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(h.a)(p.a.mark((function e(t,n){var r,a,s,c,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),a=r.postsData,s=a.feedPosts,c=a.date,e.next=5,P.post(C+"/api/feed/newsfeed",{num:5,date:c});case 5:0===(i=e.sent).data.posts.length&&t({type:"posts/finishedLoading"}),o=s.concat(i.data.posts),t({type:"posts/updateFeed",payload:{feedPosts:Object(be.a)(o)}}),t({type:"posts/updateDate",payload:{date:i.data.date}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("err :>> ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var ve=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r(),s=a.postsData.feedPosts,t.next=5,P.post(C+"/api/posts",e);case 5:c=t.sent,s.unshift(c.data),n({type:"posts/updateFeed",payload:{feedPosts:Object(be.a)(s)}}),n(I),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("err :>> ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r(),s=a.postsData.feedPosts,console.log("post :>> ",e),t.next=6,P.delete(C+"/api/posts/",{data:{post:e}});case 6:return c=s.findIndex((function(t){return t._id===e})),s.splice(c,1),console.log("feedPosts :>> ",s),n({type:"posts/updateFeed",payload:{feedPosts:Object(be.a)(s)}}),n(I),t.abrupt("return","Post successfully deleted!");case 14:return t.prev=14,t.t0=t.catch(0),console.log("err :>> ",t.t0),t.abrupt("return","Error deleting post.");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/updateFeed":return Object(r.a)(Object(r.a)({},e),{},{feedPosts:t.payload.feedPosts});case"posts/updateDate":return Object(r.a)(Object(r.a)({},e),{},{date:t.payload.date});case"posts/finishedLoading":return Object(r.a)(Object(r.a)({},e),{},{finishedLoading:!0});default:return e}},ye={"/dashboard":"Feed","/analytics":"Analytics","/profile":"Profile","/settings":"Settings"},Ne={"/admin":"Admin","/settings":"Settings"},ke="https://i.redd.it/vtzsfo1nh8u41.png";function Ce(e){var t=e.post,n=Object(l.d)((function(e){return e.userData})),r=t.user,a=Object(l.c)(),s=Object(d.d)(),c=function(){var e=Object(h.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(ge(t._id));case 2:n=e.sent,s.success(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)("div",{className:"postContainer fadeIn",children:[Object($.jsxs)("div",{children:[Object($.jsx)("img",{className:"profileImage",style:{position:"absolute"},alt:"profile",src:t.user.image?r.image.url:ke}),Object($.jsxs)("div",{className:"postHeader",children:[Object($.jsxs)("span",{className:"bold",children:[" ",r.name]})," spent",Object($.jsxs)("span",{className:"bold",children:[" $",t.price]})," on a",Object($.jsxs)("span",{className:"bold",children:[" ",t.itemName]}),n._id===t.user._id&&Object($.jsx)("span",{className:"faTrashContainer",children:Object($.jsx)(ne.b,{className:"faTrash",color:"grey",title:"Delete Post",onClick:function(){c()}})}),Object($.jsx)("br",{})]})]}),t.attachedImage?Object($.jsxs)("div",{className:"postImageCard",children:[Object($.jsx)("p",{className:"postImageText",children:" Attached Photo: "}),Object($.jsx)("div",{className:"center",children:Object($.jsx)("img",{className:"postImage",alt:"post",src:t.attachedImage.url})})]}):Object($.jsx)($.Fragment,{}),t.itemLink&&Object($.jsx)(je.ReactTinyLink,{cardSize:"medium",showGraphic:!0,maxLine:2,minLine:1,url:t.itemLink,proxyUrl:"https://thingproxy.freeboard.io/fetch"}),Object($.jsx)("div",{className:"postCaption",children:t.description})]})}n(245);var Se=n(187),Pe=n.n(Se),De=n(188),Be=n.n(De);function Ee(e){var t,n,r=e.comment;return Object($.jsxs)("div",{className:"commentContainer",children:[Object($.jsx)("div",{className:"imageContainer",children:Object($.jsx)("img",{className:"profileImage",alt:"profile",src:(null===(t=r.author)||void 0===t||null===(n=t.image)||void 0===n?void 0:n.url)||ke})}),Object($.jsxs)("div",{className:"textContainer",children:[Object($.jsxs)("span",{className:"commentName",children:[" ",r.author.name," "]}),Object($.jsx)("div",{className:"commentTextContainer",children:r.comment})]})]})}var Te=function(e){var t=e.post,n=e.user,r="";t&&(1===t.likes.length?r=t.likes[0]+" liked this.":t.likes.length>1&&(r=t.likes[0]+" and "+(t.likes.length-1)+" others liked this. "));var s=Object(l.c)(),c=n.image?n.image.url:ke,i=Object(a.useState)(""),o=Object(m.a)(i,2),u=o[0],d=o[1],j=t.comments;return Object($.jsxs)("div",{className:"mainContainer fadeIn",children:[Object($.jsx)("div",{className:"likesContainer",children:r}),Object($.jsxs)("div",{className:"likesButtonContainer",children:[Object($.jsx)(Pe.a,{animation:Be.a,size:40,reverse:t.likes.includes(n.username),onClick:function(){s(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s,c,i,o,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r(),s=a.postsData.feedPosts,c=s,t.next=6,P.put(C+"/api/posts/like",{post:e});case 6:i=t.sent,o=-1,u=0;case 9:if(!(u<s.length)){t.next=16;break}if(s[u]._id!==e){t.next=13;break}return o=u,t.abrupt("break",16);case 13:u++,t.next=9;break;case 16:if(-1!==o){t.next=18;break}return t.abrupt("return");case 18:c.splice(o,1),c.splice(o,0,i.data),n({type:"posts/updateFeed",payload:{feedPosts:Object(be.a)(c)}}),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.log("err :>> ",t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,n){return t.apply(this,arguments)}}()}(t._id))}}),Object($.jsx)("button",{style:{background:"transparent",borderWidth:"0"}})]}),Object($.jsx)("div",{className:"commentsContainer",children:j.map((function(e,t){return Object($.jsx)(Ee,{comment:e},t)}))}),Object($.jsxs)("div",{className:"commentsInputContainer",children:[Object($.jsx)("div",{className:"imageContainer",children:Object($.jsx)("img",{className:"profileImage",alt:"profile",src:c})}),Object($.jsx)("input",{placeholder:"write your comment",value:u,onChange:function(e){d(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&""!==u&&(s(function(e,t){return function(){var n=Object(h.a)(p.a.mark((function n(r,a){var s,c,i,o,u,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=a(),c=s.postsData.feedPosts,i=c,n.next=6,pe(e,t);case 6:o=n.sent,u=-1,l=0;case 9:if(!(l<c.length)){n.next=16;break}if(c[l]._id!==e){n.next=13;break}return u=l,n.abrupt("break",16);case 13:l++,n.next=9;break;case 16:if(-1!==u){n.next=18;break}return n.abrupt("return");case 18:i.splice(u,1),i.splice(u,0,o),r({type:"posts/updateFeed",payload:{feedPosts:Object(be.a)(i)}}),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(0),console.log("err :>> ",n.t0);case 26:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e,t){return n.apply(this,arguments)}}()}(t._id,u)),d(""))}})]})]})},Ie=n(189),Fe=n(190),Ae=n(196),Le=n(192),Ue=6e4,Me=36e5,Re=24*Me,_e=30*Re,He=365*Re,We=function(e){var t=Date.now()-e,n=function(e,n){var r=Math.round(t/e);return"".concat(r," ").concat(n).concat(r>1?"s":""," ago")};return t<Ue?n(1e3,"second"):t<Me?n(Ue,"minute"):t<Re?n(Me,"hour"):t<_e?n(Re,"day"):t<He?n(_e,"month"):n(He,"year")},Ge=function(e){Object(Ae.a)(n,e);var t=Object(Le.a)(n);function n(){var e;Object(Ie.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={datetime:null,string:""},e.setDateTime=function(t){var n=t.timestamp,r=new Date(n);e.setState({datetime:r.toISOString(),string:We(r)})},e}return Object(Fe.a)(n,[{key:"componentDidMount",value:function(){this.setDateTime(this.props)}},{key:"componentDidUpdate",value:function(e){this.setDateTime(e)}},{key:"shouldComponentUpdate",value:function(e,t){return t.datetime!==this.state.datetime}},{key:"render",value:function(){var e=this.state,t=e.datetime,n=e.string;return Object($.jsx)("time",{className:"postTime",dateTime:t,children:n})}}]),n}(a.Component),ze=n(191),Ye=n.n(ze);function $e(e){var t=e.postData,n=e.user,r=e.finishedLoading,a=Object(l.c)(),s=function(){a(me)};return Object($.jsxs)("div",{children:[Object($.jsx)("h1",{children:"Your Feed"}),0===t.length?Object($.jsx)("h2",{children:"No posts. Go follow someone to see their posts!"}):Object($.jsx)(Ye.a,{pageStart:0,loadMore:s,hasMore:!r,loader:Object($.jsx)("h3",{className:"loader",children:"Loading ..."},0),children:t.map((function(e,t){return Object($.jsxs)(de.a,{height:200,style:{marginBottom:"30px"},children:[Object($.jsx)(Ge,{timestamp:e.createdAt}),Object($.jsxs)("div",{className:"feedItemContainer spendrCard shadowMedium",children:[Object($.jsx)(Ce,{post:e}),Object($.jsx)(Te,{post:e,user:n},e.id)]})]},t)}))})]})}var qe=function(e){return(Math.round(100*e)/100).toFixed(2)},Ze=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)?/gi);var Je=Object(l.b)((function(e){return{user:e.userData,posts:e.postsData.feedPosts,finishedLoading:e.postsData.finishedLoading}}))((function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(m.a)(c,2),o=i[0],u=i[1],j=Object(a.useState)(""),b=Object(m.a)(j,2),f=b[0],O=b[1],x=Object(a.useState)("misc"),v=Object(m.a)(x,2),g=v[0],w=v[1],y=Object(a.useState)(0),N=Object(m.a)(y,2),k=N[0],C=N[1],S=Object(a.useState)(null),P=Object(m.a)(S,2),D=P[0],B=P[1],T=Object(a.useState)(!1),I=Object(m.a)(T,2),F=I[0],A=I[1],L=e.user,U=e.posts,M=e.finishedLoading,R=Object(l.c)(),_=Object(d.d)();Object(a.useEffect)((function(){R(fe),A(!0)}),[R]);var H=function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==r){e.next=4;break}return _.error("Name can't be blank."),e.abrupt("return");case 4:if(!(k<0)){e.next=7;break}return _.error("Price cannot be less than 0."),e.abrupt("return");case 7:if(0===o.length){e.next=11;break}if(o.match(Ze)){e.next=11;break}return _.error("Not a valid website URL."),e.abrupt("return");case 11:return n=new FormData,e.next=14,E(D);case 14:return a=e.sent,n.append("file",a),n.append("itemName",r),n.append("itemLink",o),n.append("itemCategory",g),n.append("description",f),n.append("price",k),e.prev=21,e.next=24,R(ve(n));case 24:_.success("Post created!"),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(21),console.log(e.t0);case 30:case"end":return e.stop()}}),e,null,[[21,27]])})));return function(t){return e.apply(this,arguments)}}();return F?Object($.jsxs)("div",{className:"home",children:[Object($.jsx)(re,{links:ye}),Object($.jsx)(oe.a,{className:"homeContainer",children:Object($.jsxs)(ue.a,{children:[Object($.jsx)("div",{id:"shareContainer",children:Object($.jsx)(ie,{addPost:function(e){return H(e)},updateData:function(e,t){return function(e,t){"name"===t?s(e.target.value):"link"===t?u(e.target.value):"price"===t?C(e.target.value):"desc"===t?O(e.target.value):"category"===t?w(e.target.value):"file"===t&&B(e.target.files[0])}(e,t)},name:r,link:o,price:k,category:g,desc:f})}),Object($.jsx)("div",{id:"feedContainer",children:Object($.jsx)($e,{postData:U,user:L,finishedLoading:M})})]})})]}):Object($.jsxs)("div",{className:"home",children:[" ",Object($.jsx)(re,{links:ye})," "]})})),Ke=(n(53),n(185)),Ve=n(313);var Qe=function(e){return Object($.jsxs)(g.a,{show:e.show,onHide:e.handleclose,className:"modalContainer",children:[Object($.jsx)(g.a.Header,{closeButton:!0,children:Object($.jsx)(g.a.Title,{children:"Followers"})}),Object($.jsx)(g.a.Body,{children:Object($.jsx)(Ve.a,{children:e.data.map((function(t,n){return e.isAdmin?Object($.jsx)(Ve.a.Item,{children:t.name},n):Object($.jsx)(Ve.a.Item,{children:Object($.jsx)(V.a,{to:"/profile/".concat(t.username),children:t.name})},n)}))})})]})};var Xe=function(e){var t=e.user,n=Object(a.useState)(t.followers),r=Object(m.a)(n,1)[0],s=Object(a.useState)(t.following),c=Object(m.a)(s,1)[0],i=Object(a.useState)(t.posts),o=Object(m.a)(i,1)[0],u=Object(a.useState)(!1),l=Object(m.a)(u,2),d=l[0],j=l[1],b=Object(a.useState)(!1),p=Object(m.a)(b,2),h=p[0],f=p[1];return Object($.jsxs)(ue.a,{className:"profileStatsContainer",children:[Object($.jsxs)(Ke.a,{children:[Object($.jsx)("div",{className:"profileStatsNumber",children:o.length}),Object($.jsx)("div",{children:"Posts"})]}),Object($.jsxs)(Ke.a,{onClick:function(){return j(!0)},className:"clickable",children:[Object($.jsx)("div",{className:"profileStatsNumber",children:r?r.length:0}),Object($.jsx)("div",{children:"Followers"})]}),Object($.jsxs)(Ke.a,{onClick:function(){return f(!0)},className:"clickable",children:[Object($.jsx)("div",{className:"profileStatsNumber",children:c?c.length:0}),Object($.jsx)("div",{children:"Following"})]}),Object($.jsx)(Qe,{data:r,handleclose:function(){return j(!1)},show:d}),Object($.jsx)(Qe,{data:c,handleclose:function(){return f(!1)},show:h})]})};var et=function(e){var t=e.name,n=e.input,r=e.show,a=e.handleClose,s=e.value,c=e.onChange,i=e.handleSubmit;return Object($.jsx)("div",{children:Object($.jsxs)(g.a,{className:"modalContainer",show:r,onHide:a,animation:!0,children:[Object($.jsx)(g.a.Header,{closeButton:!0,children:Object($.jsxs)(g.a.Title,{children:["Edit ",t]})}),Object($.jsxs)(g.a.Body,{children:[t,"input"===n?Object($.jsx)("input",{value:s,onChange:c}):Object($.jsx)("textarea",{value:s,onChange:c})]}),Object($.jsxs)(g.a.Footer,{children:[Object($.jsx)(ce.a,{variant:"secondary",onClick:function(){return a(!1)},children:"Close"}),Object($.jsx)(ce.a,{variant:"primary",onClick:function(e){return function(e,t){a(!0),i(e,t)}(e,t)},children:"Save Changes"})]})]})})};var tt=function(e){var t=e.editable,n=e.user,r=Object(a.useState)(n.username),s=Object(m.a)(r,2),c=s[0],i=s[1],o=Object(a.useState)(c),u=Object(m.a)(o,2),j=u[0],b=u[1],f=Object(a.useState)(n.description),O=Object(m.a)(f,2),x=O[0],v=O[1],g=Object(a.useState)(x),w=Object(m.a)(g,2),y=w[0],N=w[1],k=Object(a.useState)(!1),C=Object(m.a)(k,2),S=C[0],P=C[1],D=Object(a.useState)(!1),B=Object(m.a)(D,2),E=B[0],T=B[1],I=Object(l.c)(),F=Object(d.d)(),A=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"Username"!==n){e.next=9;break}return e.next=4,I(L({username:j}));case 4:(r=e.sent).err&&F.error(r.err),i(j),e.next=10;break;case 9:"Description"===n&&(I(L({description:y})),v(y));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object($.jsxs)("div",{className:"infoContainer",children:[Object($.jsxs)(ue.a,{className:"nameContainer",children:[Object($.jsx)("div",{className:"bold profileName",children:n.name}),Object($.jsxs)("div",{className:"grey",children:["@",n.username]})]}),t&&Object($.jsxs)(ue.a,{children:[Object($.jsx)("div",{className:"edit",onClick:function(){return P(!0)},children:"Edit Username"}),Object($.jsx)(et,{name:"Username",input:"input",show:S,handleClose:function(e){P(!1),e&&i(j)},value:j,onChange:function(e){b(e.target.value)},handleSubmit:A})]}),Object($.jsx)(ue.a,{className:"descriptionContainer",children:Object($.jsx)("div",{children:n.description})}),t&&Object($.jsxs)(ue.a,{children:[Object($.jsx)("div",{className:"edit",onClick:function(){return T(!0)},children:"Edit Description"}),Object($.jsx)(et,{name:"Description",input:"text",show:E,handleClose:function(e){return function(e){T(!1),e&&v(y)}(e)},value:y,onChange:function(e){N(e.target.value)}})]})]})};function nt(e){var t=e.show,n=e.handleClose,r=Object(l.c)();function a(){return(a=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.image.files[0],r(U(a)),n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object($.jsx)(g.a,{show:t,onHide:n,className:"modalContainer",children:Object($.jsx)("div",{id:"uploadPhotoModal",children:Object($.jsxs)("form",{className:"image-form",onSubmit:function(e){return a.apply(this,arguments)},children:[Object($.jsxs)("div",{className:"image-form__field",children:[Object($.jsx)("label",{children:"Image:"}),Object($.jsx)("input",{name:"image",type:"file",accept:"image/*"})]}),Object($.jsx)("button",{type:"submit",children:"Upload"})]})})})}var rt=function(e){var t=e.editable,n=e.user,r=Object(a.useState)(!1),s=Object(m.a)(r,2),c=s[0],i=s[1];return t?Object($.jsxs)("div",{children:[Object($.jsx)("img",{src:n.image?n.image.url:ke,alt:"User's profile avatar",className:"profilePicture shadowSmall"}),Object($.jsx)("div",{onClick:function(){return i(!0)},className:"profilePictureHover",children:"Change Photo"}),Object($.jsx)(nt,{show:c,handleClose:function(){return i(!1)}})]}):t?void 0:Object($.jsx)("img",{src:n.image?n.image.url:ke,alt:"User",className:"profilePicture shadowSmall"})},at=n(308);var st=function(e){var t=e.user,n=e.loggedIn,r=void 0===n||n,s=e.canFollow,c=Object(a.useState)(!1),i=Object(m.a)(c,2),o=i[0],u=i[1],d=Object(l.d)((function(e){return e.userData})),j=Object(l.c)(),b=function(e){j(e?function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.post(C+"/api/users/unfollow",{id:e});case 3:t.sent,n(I),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{err:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()}(t._id):function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.post(C+"/api/users/follow",{id:e});case 3:return t.sent,n(I),t.abrupt("return",e.data);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{err:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()}(t._id))};return Object($.jsxs)("div",{className:"profileContainer shadowMedium",children:[Object($.jsx)(rt,{editable:r,user:t}),r?Object($.jsx)("div",{className:"editProfileButton",onClick:function(){return u(!o)},children:Object($.jsx)(at.a,{size:"1.5em",color:"grey",title:"Toggle Edit Profile"})}):Object($.jsx)($.Fragment,{}),Object($.jsxs)(oe.a,{children:[Object($.jsx)(Xe,{user:t}),Object($.jsx)(tt,{editable:o,user:t}),s?function(){var e=t.followers.some((function(e){return e._id===d._id})),n=e?"Unfollow":"Follow";return Object($.jsx)(ce.a,{onClick:function(){return b(e)},children:n})}():Object($.jsx)($.Fragment,{})]})]})};var ct=function(e){var t=e.user,n=Object(a.useState)(!1),r=Object(m.a)(n,2);return r[0],r[1],Object($.jsxs)("div",{className:"profilePosts shadowMedium",children:[Object($.jsx)("h1",{className:"bold profileName",children:" Posts"}),0==t.posts.length?(console.log(t.posts.length),Object($.jsx)("h3",{children:" No Posts have been posted. "})):t.posts.slice(0).reverse().map((function(e,n){return Object($.jsx)(de.a,{height:200,children:Object($.jsx)("div",{style:{borderBottom:"1px solid lightgrey",paddingTop:"5px"},children:Object($.jsx)(Ce,{user:t,post:e},n)})},n)}))]})};var it=function(e){e.match.params.username;var t=Object(a.useState)(!1),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(l.d)((function(e){return e.userData}));return Object(a.useEffect)((function(){c&&Object.keys(c).length>0&&(console.log("useeffect user ",c),s(!0))}),[c]),r?Object($.jsxs)("div",{className:"home",children:[Object($.jsx)(re,{links:ye}),Object($.jsx)(st,{user:c}),Object($.jsx)(ct,{user:c})]}):Object($.jsxs)("div",{className:"home",children:[" ",Object($.jsx)(re,{links:ye})," "]})},ot=(n(152),n(193)),ut=n(137),lt=["#ffe6b3","#ffb3d1","#b3ecff ","#99ff99","#ffff99","#99ffcc","#ff99e6","#FFB6B6","#6A2135","#FF3F96"];var dt=function(e){var t=e.stats,n=Object(a.useState)([]),s=Object(m.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(void 0),u=Object(m.a)(o,2),l=u[0],d=u[1],j=Object(a.useState)(void 0),b=Object(m.a)(j,2),p=b[0],h=b[1];Object(a.useEffect)((function(){var e=Object.keys(t).map((function(e,n){return{title:e,label:e,value:t[e],color:lt[n]}}));i(e)}),[t]);var f=c.map((function(e,t){return p===t?Object(r.a)(Object(r.a)({},e),{},{color:"grey",title:e.title}):e}));return Object($.jsx)("div",{children:Object($.jsxs)("div",{className:"pieContainer spendrCard shadowMedium","data-tip":"","data-for":"chart",children:[Object($.jsx)("h2",{children:"Your Spending Distribution"}),Object($.jsx)(ut.PieChart,{style:{fontFamily:'"Nunito Sans", -apple-system, Helvetica, Arial, sans-serif',fontSize:"4px",color:"white"},data:f,radius:ut.PieChart.defaultProps.radius-6,lineWidth:60,segmentsStyle:{transition:"stroke .3s",cursor:"pointer"},segmentsShift:function(e){return e===l?6:1},animate:!0,label:function(e){return function(e){return e.title+"\n"+Math.round(e.percentage)+"%"}(e.dataEntry)},labelPosition:70,labelStyle:{fill:"#000",opacity:.9,pointerEvents:"none"},onClick:function(e,t){d(t===l?void 0:t)},onMouseOver:function(e,t){h(t)},onMouseOut:function(){h(void 0)}}),Object($.jsx)(ot.a,{id:"chart",getContent:function(){return"number"===typeof p?function(e){var t=qe(e.value);return"You have spent $".concat(t," on ").concat(e.title," this month.")}(f[p]):null}})]})})},jt=n(65),bt=n(34),pt=function(e){return e.map((function(e){return[Date.parse(e[0]),e[1]]}))};var ht=function(e){var t=function(e){var t={name:"Spending",columns:["time","value"],points:pt(e)};return new bt.TimeSeries(t)}(e.stats.sort((function(e,t){return Date.parse(e[0])-Date.parse(t[0])}))),n=Object(a.useRef)(null),r=Object(a.useState)(500),s=Object(m.a)(r,2),c=s[0],i=s[1];return Object(a.useEffect)((function(){n.current&&i(n.current.offsetWidth)}),[n]),Object($.jsxs)("div",{className:"seriesContainer spendrCard shadowMedium",children:[Object($.jsx)("h2",{children:"Your Spending Over The Past Month"}),Object($.jsx)("div",{className:"chartContainer",ref:n,children:Object($.jsx)(jt.ChartContainer,{timeRange:t.range(),format:"%b %d",timeAxisAngledLabels:window.innerWidth<=500,timeAxisHeight:65,width:c,children:Object($.jsxs)(jt.ChartRow,{height:"200",children:[Object($.jsx)(jt.YAxis,{id:"price",label:"Price ($)",min:t.min(),max:t.max(),format:"$,.2f",width:"50"}),Object($.jsxs)(jt.Charts,{children:[Object($.jsx)(jt.LineChart,{axis:"price",series:t}),Object($.jsx)(jt.Baseline,{axis:"price",value:t.avg(),label:"Avg"})]})]})})})]})};var ft=function(e){return Object($.jsxs)("div",{className:"summaryContainer spendrCard shadowMedium",children:[Object($.jsx)("h2",{children:"Summary"}),Object($.jsxs)("div",{children:["This month you have spent $",qe(e.stats)," on ",e.numItems," items."]})]})};var Ot=Object(l.b)((function(e){return console.log("state.userData :>> ",e.userData),{user:e.userData}}))((function(e){var t=Object(a.useState)([]),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)([]),i=Object(m.a)(c,2),o=i[0],u=i[1],l=Object(a.useState)(0),d=Object(m.a)(l,2),j=d[0],b=d[1],p=Object(a.useState)(!1),h=Object(m.a)(p,2),f=h[0],O=h[1],x=((new Date).getMonth()+1).toString().padStart(2,0),v=e.user;return Object(a.useEffect)((function(){if(v&&0!==Object.keys(v).length){var e=[[v.createdAt,0]],t={},n=0;for(var r in v.posts)e.push([v.posts[r].updatedAt,v.posts[r].price]),""===v.posts[r].itemCategory&&(v.posts[r].itemCategory="misc"),t[v.posts[r].itemCategory]?t[v.posts[r].itemCategory]+=v.posts[r].price:t[v.posts[r].itemCategory]=v.posts[r].price,v.posts[r].updatedAt.slice(5,7)===x&&(n+=v.posts[r].price);b(n),s(e),u(t),O(!0)}}),[v,x]),f?Object($.jsxs)("div",{className:"home",children:[Object($.jsx)(re,{links:ye}),Object($.jsx)(oe.a,{children:Object($.jsxs)("div",{className:"flexContainer",children:["  ",Object($.jsxs)("div",{className:"flexCol",children:[Object($.jsx)(ft,{stats:j,numItems:r.length}),Object($.jsx)(ht,{stats:r})]}),Object($.jsx)("div",{className:"flexCol",children:Object($.jsx)(dt,{stats:o})})]})})]}):Object($.jsxs)("div",{className:"home",children:[" ",Object($.jsx)(re,{links:ye})," "]})})),mt=(n(296),n(309)),xt=n(310);var vt=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(""),o=Object(m.a)(i,2),u=o[0],j=o[1],b=Object(a.useState)(""),f=Object(m.a)(b,2),O=f[0],x=f[1],v=Object(a.useState)(0),w=Object(m.a)(v,2),y=w[0],N=w[1],k=Object(a.useState)(""),C=Object(m.a)(k,2),S=C[0],P=C[1],D=Object(l.c)(),B=Object(d.d)(),E=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("password :>> ",O),e.next=4,D(M(s,O,u,y));case 4:(n=e.sent)&&n.err?P(n.err):B.success("Change password successful!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object($.jsxs)(g.a,Object(r.a)(Object(r.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object($.jsx)(g.a.Header,{closeButton:!0,children:Object($.jsx)(g.a.Title,{id:"contained-modal-title-vcenter",children:"Reset Password"})}),Object($.jsxs)(g.a.Body,{children:[Object($.jsx)("h5",{children:"Please enter old password to reset password"}),Object($.jsxs)("form",{onSubmit:function(e){E(e)},children:[Object($.jsx)("input",{className:"inputBox ",type:"password",name:"password",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Old Password"}),Object($.jsx)("input",{className:"inputBox ",type:"password",name:"password",value:O,onChange:function(e){return x(e.target.value)},placeholder:"New Password"}),Object($.jsx)("input",{className:"inputBox ",type:"password",name:"password",value:u,onChange:function(e){return j(e.target.value)},placeholder:"Confirm New Password"}),Object($.jsx)(Y.a,{password:O,style:{width:"300px",margin:"auto"},onChangeScore:N}),Object($.jsx)("p",{className:"redErrorText",children:S}),Object($.jsx)("input",{type:"submit",id:"createAccBtn",value:"Reset Password"})]})]})]}))};var gt=function(e){var t=Object(l.c)(),n=Object(f.f)(),a=Object(d.d)(),s=function(){var e=Object(h.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(R);case 2:if(!(r=e.sent)||!r.err){e.next=6;break}return a.error("Error deleting user!"),e.abrupt("return");case 6:k.a.remove("jwt"),t({type:"home/logout"}),n.push("/");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)(g.a,Object(r.a)(Object(r.a)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object($.jsx)(g.a.Header,{closeButton:!0,children:Object($.jsx)(g.a.Title,{id:"contained-modal-title-vcenter",children:"Delete Account"})}),Object($.jsxs)(g.a.Body,{children:[Object($.jsx)("h5",{children:"Please confirm to delete this account. This action cannot be undone."}),Object($.jsx)(ce.a,{className:"settingsButton",onClick:function(){return s()},children:"Delete"})]})]}))};var wt=function(){var e=Object(l.c)(),t=Object(f.f)(),n=Object(d.d)(),r=Object(l.d)((function(e){return e.userData})),s=Object(a.useState)(r.privacy),c=Object(m.a)(s,2),i=c[0],o=c[1],u=Object(a.useState)(!1),j=Object(m.a)(u,2),b=j[0],p=j[1],h=Object(a.useState)(!1),O=Object(m.a)(h,2),x=O[0],v=O[1],g=Object(a.useState)(!1),w=Object(m.a)(g,2),y=w[0],N=w[1];Object(a.useEffect)((function(){r&&0!==Object.keys(r).length&&(o(r.privacy),N(!0))}),[r]);var C=function(){k.a.remove("jwt"),e({type:"home/logout"}),t.push("/")};return y?r.admin?Object($.jsx)("div",{children:Object($.jsxs)("div",{className:"settingsContainer",children:[Object($.jsx)(re,{links:Ne}),Object($.jsx)("h3",{className:"headers",children:" Admin Account"}),Object($.jsxs)("div",{id:"users",className:"list-group-item shadowSmall",children:[Object($.jsx)("h5",{className:"mb-",children:r.name}),Object($.jsxs)("p",{className:"mb-1",children:["Username: @",r.username]}),Object($.jsxs)("p",{className:"mb-1",children:["Email: ",r.email]}),Object($.jsxs)("p",{className:"mb-1",children:["Date Registered: ",r.createdAt.slice(0,10)]})]}),Object($.jsx)("h3",{className:"headers",children:"Account"}),Object($.jsx)("div",{className:"list-group-item shadowSmall",children:Object($.jsxs)("div",{className:"settingsInfoContainer",children:[Object($.jsx)("span",{children:" Reset Password "}),Object($.jsx)(ce.a,{className:"settingsButton",onClick:function(){return p(!0)},children:" Reset "}),Object($.jsx)(vt,{show:b,onHide:function(){return p(!1)}}),Object($.jsx)("br",{})]})}),Object($.jsx)("div",{className:"list-group-item",children:Object($.jsx)(ce.a,{className:"settingsButton",onClick:function(){return C()},children:"Logout"})})]})}):Object($.jsx)("div",{children:Object($.jsxs)("div",{className:"settingsContainer",children:[Object($.jsx)(re,{links:ye}),Object($.jsx)("h3",{className:"headers",children:" Profile Information"}),Object($.jsxs)("div",{id:"users",className:"list-group-item shadowSmall",children:[Object($.jsx)(V.a,{to:"/profile",children:Object($.jsx)("h5",{className:"mb-",children:r.name})}),Object($.jsxs)("p",{className:"mb-1",children:["Username: @",r.username]}),Object($.jsxs)("p",{className:"mb-1",children:["Email: ",r.email]}),Object($.jsxs)("p",{className:"mb-1",children:["Date Registered: ",r.createdAt.slice(0,10)]})]}),Object($.jsx)("h3",{className:"headers",children:"Preferences"}),Object($.jsxs)("div",{className:"list-group-item shadowSmall",children:[Object($.jsx)("h5",{children:" Post Privacy "}),Object($.jsx)("span",{children:" Who can see your posts: "}),Object($.jsx)(mt.a,{toggle:!0,className:"selectionButtons",children:[{name:"Private",value:"Private"},{name:"Friends Only",value:"Friends Only"},{name:"Public",value:"Public"}].map((function(t,r){return Object($.jsx)(xt.a,{type:"radio",variant:"light",name:"radio",value:t.value,checked:i===t.value,onChange:function(t){return function(t){var r=e(L({privacy:t.currentTarget.value}));r.err&&n.error(r.err),o(t.currentTarget.value)}(t)},id:"selectionButtons",children:t.name},r)}))})]}),Object($.jsx)("h3",{className:"headers",children:"Account"}),Object($.jsxs)("div",{className:"list-group-item shadowSmall",children:[Object($.jsxs)("div",{className:"settingsInfoContainer",children:[Object($.jsx)("span",{children:" Reset Password "}),Object($.jsx)(ce.a,{className:"settingsButton",onClick:function(){return p(!0)},children:" Reset "}),Object($.jsx)(vt,{show:b,onHide:function(){return p(!1)}})]}),Object($.jsxs)("div",{className:"settingsInfoContainer",children:[Object($.jsx)("span",{children:" Delete Account "}),Object($.jsx)(ce.a,{className:"settingsButton",id:"deleteButton",onClick:function(){return v(!0)},children:"Delete"})," ",Object($.jsx)("br",{}),Object($.jsx)(gt,{show:x,onHide:function(){return v(!1)}})]})]}),Object($.jsx)("div",{className:"list-group-item shadowSmall",children:Object($.jsx)(ce.a,{className:"settingsButton btn-default",onClick:function(){return C()},children:"Logout"})})]})}):Object($.jsxs)("div",{className:"home",children:[" ",Object($.jsx)(re,{links:ye})," "]})};n(175);var yt=function(e){var t=e.user;return Object($.jsx)(oe.a,{children:Object($.jsxs)("div",{id:"users",className:"list-group-item d-flex  align-items-center",children:[Object($.jsxs)("div",{id:"userInfo",href:"/profile/"+t.username,children:[Object($.jsx)("h5",{className:"mb-1",children:t.name}),Object($.jsxs)("p",{className:"mb-1",children:["Username: ",t.username]}),Object($.jsxs)("p",{className:"mb-1",children:["Email: ",t.email]}),Object($.jsxs)("p",{className:"mb-1",children:["Register Date: ",t.createdAt.slice(0,10)]})]}),Object($.jsxs)("div",{children:[Object($.jsx)(ce.a,{className:"btn-default",id:"profileButton",href:"/profile/"+t.username,children:" View Profile"}),Object($.jsx)(ce.a,{onClick:function(){return e.handleDelete(t.username)},className:"btn-default",id:"deleteButton",children:" Delete user"})]})]})})},Nt=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(C+"/api/admin/allUsers");case 3:if(t=e.sent){e.next=7;break}throw console.log(t),Error("Error: User received from API but not correctly formatted");case 7:return console.log(t.data),e.abrupt("return",t.data);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),alert("Error loading user data!");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),kt=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete(C+"/api/admin/deleteUser/".concat(t));case 3:if(n=e.sent){e.next=7;break}throw console.log(n),Error("Error: User received from API but not correctly formatted");case 7:return console.log(n.data),e.abrupt("return",n.data);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),alert("Error loading user data!");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();var Ct=function(){Object(l.c)(),Object(f.f)();var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),c=Object(m.a)(s,2),i=c[0],o=c[1];function u(e){kt(e).then((function(e){console.log("deleted: ",e),Nt().then((function(e){console.log("admin users: ",e),o(e)})).catch((function(e){console.log("err: "+e)}))})).catch((function(e){console.log("err: "+e)}))}return Object(a.useEffect)((function(){Nt().then((function(e){console.log("admin users: ",e),o(e)})).catch((function(e){console.log("err: "+e)})),r(!0)}),[]),n?Object($.jsxs)("div",{className:"admin",children:[Object($.jsx)(re,{links:Ne}),Object($.jsxs)("div",{className:"userContainer",children:[Object($.jsx)("h3",{children:"Registered Users"}),Object($.jsx)(Ve.a,{children:(console.log("userlist :>> ",i),i.map((function(e){if(!e.admin)return Object($.jsx)(yt,{user:e,handleDelete:u},e.username)})))})]})]}):Object($.jsxs)("div",{className:"admin",children:[" ",Object($.jsx)(re,{links:Ne})," "]})};n(297),n(298);var St=function(e){var t=e.match.params.username,n=Object(a.useState)(!1),r=Object(m.a)(n,2),s=r[0],c=r[1],i=Object(a.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(m.a)(j,2),f=b[0],O=b[1],x=Object(a.useState)(!1),v=Object(m.a)(x,2),g=v[0],w=v[1],y=Object(l.c)(),N=Object(a.useState)(ye),k=Object(m.a)(N,2),C=k[0],S=k[1],P=Object(l.d)((function(e){return e.userData}));return Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(F(t));case 2:if(!(n=e.sent).err){e.next=7;break}O(!0),e.next=12;break;case 7:return d(n),e.next=10,y(A(n.username));case 10:r=e.sent,w(r);case 12:c(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();P&&Object.keys(P).length>0&&(e(),P.admin&&S(Ne))}),[t,y,P]),s?Object($.jsxs)("div",{className:"home",children:[Object($.jsx)(re,{links:C}),f?Object($.jsxs)("div",{className:"center",id:"centerHeader",children:[" ",Object($.jsx)("h1",{children:" Profile does not exist. "})," "]}):function(){var e=!0;return P.admin||P._id===u._id?e=!0:"Private"===u.privacy?e=!1:"Friends Only"===u.privacy&&(e=g),Object($.jsxs)($.Fragment,{children:[Object($.jsx)(st,{user:u,loggedIn:!1,canFollow:P._id!==u._id&!P.admin}),e?Object($.jsx)(ct,{user:u}):Object($.jsxs)("div",{className:"center",id:"centerHeader",children:[Object($.jsx)("h3",{children:" Private Profile "}),"Private"===u.privacy?Object($.jsx)("p",{children:" User in private mode. "}):Object($.jsx)("p",{children:" Please follow to view posts. "})]})]})}()]}):Object($.jsxs)("div",{className:"home",children:[" ",Object($.jsx)(re,{links:C})," "]})};var Pt=function(){var e=Object(l.d)((function(e){return e.loggedIn.loggedIn})),t=Object(l.d)((function(e){return e.userData}));console.log("userData :>> ",t);var n=Object(l.c)();return Object(a.useEffect)((function(){var e=function(){k.a.remove("jwt"),n({type:"home/logout"}),O.push("/")},t=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(I);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{!function(){var t=k.a.get("jwt");t&&void 0!==t?n({type:"loggedIn/login"}):(console.log("LOGGING OUT"),e())}(),t().catch((function(t){e()}))}catch(r){console.log("err :>> ",r),e()}}),[n]),Object($.jsx)(f.b,{history:O,children:Object($.jsx)("div",{className:"app",children:e&!t.admin?Object($.jsxs)(f.c,{children:[Object($.jsx)(f.a,{exact:!0,path:"/dashboard",component:Je}),Object($.jsx)(f.a,{exact:!0,path:"/profile",component:it}),Object($.jsx)(f.a,{exact:!0,path:"/profile/:username",component:St}),Object($.jsx)(f.a,{exact:!0,path:"/analytics",component:Ot}),Object($.jsx)(f.a,{exact:!0,path:"/settings",component:wt}),Object($.jsx)(f.a,{exact:!0,path:"/admin",component:Ct}),Object($.jsx)(f.a,{exact:!0,path:"/",component:Je})]}):e&t.admin?Object($.jsxs)(f.c,{children:[Object($.jsx)(f.a,{exact:!0,path:"/",component:Ct}),Object($.jsx)(f.a,{exact:!0,path:"/admin",component:Ct}),Object($.jsx)(f.a,{exact:!0,path:"/settings",component:wt}),Object($.jsx)(f.a,{exact:!0,path:"/profile/:username",component:St})]}):Object($.jsx)(f.c,{children:Object($.jsx)(f.a,{path:"/",component:J})})})})},Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},Bt=Object(i.combineReducers)({loggedIn:G,userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"userData/userStatus":return t.payload;default:return e}},postsData:we,searchData:X}),Et=function(e,t){return"home/logout"===t.type&&(e=void 0),Bt(e,t)},Tt=Object(u.composeWithDevTools)(Object(i.applyMiddleware)(o.a)),It=Object(i.createStore)(Et,Tt),Ft={position:d.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:d.c.SCALE};c.a.render(Object($.jsx)(l.a,{store:It,children:Object($.jsx)(d.a,Object(r.a)(Object(r.a)({template:j.a},Ft),{},{children:Object($.jsx)(Pt,{})}))}),document.getElementById("root")),Dt()},53:function(e,t,n){}},[[299,1,2]]]);
//# sourceMappingURL=main.bab28ec9.chunk.js.map